{% extends 'staff_panel/base.html' %}

{% block title %}Integrations{% endblock %}

{% block staff_panel_content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2><i class="fas fa-plug me-2"></i>Integrations</h2>
                <div class="btn-group">
                    <button type="button" class="btn btn-outline-secondary" onclick="syncAllIntegrations()">
                        <i class="fas fa-sync me-1"></i>Sync All
                    </button>
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addIntegrationModal">
                        <i class="fas fa-plus me-1"></i>Add Integration
                    </button>
                </div>
            </div>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <!-- Statistics Cards -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card bg-primary text-white">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-plug fa-2x me-3"></i>
                                <div>
                                    <h5 class="card-title">{{ integrations.count }}</h5>
                                    <p class="card-text">Total Integrations</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-success text-white">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-check-circle fa-2x me-3"></i>
                                <div>
                                    <h5 class="card-title">{{ active_integrations }}</h5>
                                    <p class="card-text">Active</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-warning text-white">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-exclamation-triangle fa-2x me-3"></i>
                                <div>
                                    <h5 class="card-title">{{ pending_integrations }}</h5>
                                    <p class="card-text">Pending</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-danger text-white">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-times-circle fa-2x me-3"></i>
                                <div>
                                    <h5 class="card-title">{{ failed_integrations }}</h5>
                                    <p class="card-text">Failed</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Available Integrations -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0">Available Integrations</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <!-- Slack Integration -->
                        <div class="col-lg-4 col-md-6 mb-3">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body text-center">
                                    <div class="mb-3">
                                        <i class="fab fa-slack fa-3x text-primary"></i>
                                    </div>
                                    <h6 class="card-title">Slack</h6>
                                    <p class="card-text small text-muted">Team communication and notifications</p>
                                    {% if integrations.slack.is_active %}
                                        <span class="badge bg-success mb-2">Connected</span>
                                        <div class="btn-group-vertical w-100">
                                            <button class="btn btn-outline-primary btn-sm" onclick="configureIntegration('slack')">
                                                <i class="fas fa-cog"></i> Configure
                                            </button>
                                            <button class="btn btn-outline-danger btn-sm" onclick="disconnectIntegration('slack')">
                                                <i class="fas fa-unlink"></i> Disconnect
                                            </button>
                                        </div>
                                    {% else %}
                                        <span class="badge bg-secondary mb-2">Not Connected</span>
                                        <button class="btn btn-primary btn-sm w-100" onclick="connectIntegration('slack')">
                                            <i class="fas fa-plug"></i> Connect
                                        </button>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Microsoft Teams Integration -->
                        <div class="col-lg-4 col-md-6 mb-3">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body text-center">
                                    <div class="mb-3">
                                        <i class="fab fa-microsoft fa-3x text-info"></i>
                                    </div>
                                    <h6 class="card-title">Microsoft Teams</h6>
                                    <p class="card-text small text-muted">Collaboration and video meetings</p>
                                    {% if integrations.teams.is_active %}
                                        <span class="badge bg-success mb-2">Connected</span>
                                        <div class="btn-group-vertical w-100">
                                            <button class="btn btn-outline-primary btn-sm" onclick="configureIntegration('teams')">
                                                <i class="fas fa-cog"></i> Configure
                                            </button>
                                            <button class="btn btn-outline-danger btn-sm" onclick="disconnectIntegration('teams')">
                                                <i class="fas fa-unlink"></i> Disconnect
                                            </button>
                                        </div>
                                    {% else %}
                                        <span class="badge bg-secondary mb-2">Not Connected</span>
                                        <button class="btn btn-primary btn-sm w-100" onclick="connectIntegration('teams')">
                                            <i class="fas fa-plug"></i> Connect
                                        </button>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- GitHub Integration -->
                        <div class="col-lg-4 col-md-6 mb-3">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body text-center">
                                    <div class="mb-3">
                                        <i class="fab fa-github fa-3x text-dark"></i>
                                    </div>
                                    <h6 class="card-title">GitHub</h6>
                                    <p class="card-text small text-muted">Code repository and project management</p>
                                    {% if integrations.github.is_active %}
                                        <span class="badge bg-success mb-2">Connected</span>
                                        <div class="btn-group-vertical w-100">
                                            <button class="btn btn-outline-primary btn-sm" onclick="configureIntegration('github')">
                                                <i class="fas fa-cog"></i> Configure
                                            </button>
                                            <button class="btn btn-outline-danger btn-sm" onclick="disconnectIntegration('github')">
                                                <i class="fas fa-unlink"></i> Disconnect
                                            </button>
                                        </div>
                                    {% else %}
                                        <span class="badge bg-secondary mb-2">Not Connected</span>
                                        <button class="btn btn-primary btn-sm w-100" onclick="connectIntegration('github')">
                                            <i class="fas fa-plug"></i> Connect
                                        </button>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Jira Integration -->
                        <div class="col-lg-4 col-md-6 mb-3">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body text-center">
                                    <div class="mb-3">
                                        <i class="fab fa-jira fa-3x text-primary"></i>
                                    </div>
                                    <h6 class="card-title">Jira</h6>
                                    <p class="card-text small text-muted">Issue tracking and project management</p>
                                    {% if integrations.jira.is_active %}
                                        <span class="badge bg-success mb-2">Connected</span>
                                        <div class="btn-group-vertical w-100">
                                            <button class="btn btn-outline-primary btn-sm" onclick="configureIntegration('jira')">
                                                <i class="fas fa-cog"></i> Configure
                                            </button>
                                            <button class="btn btn-outline-danger btn-sm" onclick="disconnectIntegration('jira')">
                                                <i class="fas fa-unlink"></i> Disconnect
                                            </button>
                                        </div>
                                    {% else %}
                                        <span class="badge bg-secondary mb-2">Not Connected</span>
                                        <button class="btn btn-primary btn-sm w-100" onclick="connectIntegration('jira')">
                                            <i class="fas fa-plug"></i> Connect
                                        </button>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Trello Integration -->
                        <div class="col-lg-4 col-md-6 mb-3">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body text-center">
                                    <div class="mb-3">
                                        <i class="fab fa-trello fa-3x text-info"></i>
                                    </div>
                                    <h6 class="card-title">Trello</h6>
                                    <p class="card-text small text-muted">Visual project management boards</p>
                                    {% if integrations.trello.is_active %}
                                        <span class="badge bg-success mb-2">Connected</span>
                                        <div class="btn-group-vertical w-100">
                                            <button class="btn btn-outline-primary btn-sm" onclick="configureIntegration('trello')">
                                                <i class="fas fa-cog"></i> Configure
                                            </button>
                                            <button class="btn btn-outline-danger btn-sm" onclick="disconnectIntegration('trello')">
                                                <i class="fas fa-unlink"></i> Disconnect
                                            </button>
                                        </div>
                                    {% else %}
                                        <span class="badge bg-secondary mb-2">Not Connected</span>
                                        <button class="btn btn-primary btn-sm w-100" onclick="connectIntegration('trello')">
                                            <i class="fas fa-plug"></i> Connect
                                        </button>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Google Workspace Integration -->
                        <div class="col-lg-4 col-md-6 mb-3">
                            <div class="card h-100 border-0 shadow-sm">
                                <div class="card-body text-center">
                                    <div class="mb-3">
                                        <i class="fab fa-google fa-3x text-warning"></i>
                                    </div>
                                    <h6 class="card-title">Google Workspace</h6>
                                    <p class="card-text small text-muted">Email, calendar, and docs integration</p>
                                    {% if integrations.google.is_active %}
                                        <span class="badge bg-success mb-2">Connected</span>
                                        <div class="btn-group-vertical w-100">
                                            <button class="btn btn-outline-primary btn-sm" onclick="configureIntegration('google')">
                                                <i class="fas fa-cog"></i> Configure
                                            </button>
                                            <button class="btn btn-outline-danger btn-sm" onclick="disconnectIntegration('google')">
                                                <i class="fas fa-unlink"></i> Disconnect
                                            </button>
                                        </div>
                                    {% else %}
                                        <span class="badge bg-secondary mb-2">Not Connected</span>
                                        <button class="btn btn-primary btn-sm w-100" onclick="connectIntegration('google')">
                                            <i class="fas fa-plug"></i> Connect
                                        </button>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Active Integrations Table -->
            {% if integrations %}
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Active Integrations</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Integration</th>
                                        <th>Status</th>
                                        <th>Last Sync</th>
                                        <th>Connected By</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for integration in integrations %}
                                        <tr>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <i class="fab fa-{{ integration.provider_name|lower }} fa-lg me-2"></i>
                                                    <div>
                                                        <strong>{{ integration.provider_name }}</strong>
                                                        <br><small class="text-muted">{{ integration.description }}</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                {% if integration.is_active %}
                                                    <span class="badge bg-success">
                                                        <i class="fas fa-check-circle me-1"></i>Active
                                                    </span>
                                                {% else %}
                                                    <span class="badge bg-secondary">
                                                        <i class="fas fa-pause-circle me-1"></i>Inactive
                                                    </span>
                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if integration.last_sync %}
                                                    {{ integration.last_sync|timesince }} ago
                                                {% else %}
                                                    <span class="text-muted">Never</span>
                                                {% endif %}
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <span class="badge bg-secondary rounded-pill me-2">
                                                        {{ integration.created_by.get_full_name|slice:":2"|upper }}
                                                    </span>
                                                    {{ integration.created_by.get_full_name }}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="btn-group btn-group-sm">
                                                    <button type="button" class="btn btn-outline-primary" 
                                                            onclick="configureIntegration('{{ integration.provider_name|lower }}')">
                                                        <i class="fas fa-cog"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-outline-success" 
                                                            onclick="testIntegration('{{ integration.id }}')">
                                                        <i class="fas fa-vial"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-outline-info" 
                                                            onclick="syncIntegration('{{ integration.id }}')">
                                                        <i class="fas fa-sync"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-outline-danger" 
                                                            onclick="removeIntegration('{{ integration.id }}', '{{ integration.provider_name }}')">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- Add Integration Modal -->
<div class="modal fade" id="addIntegrationModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add New Integration</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="action" value="add_integration">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="integration_type" class="form-label">Integration Type *</label>
                        <select class="form-select" id="integration_type" name="integration_type" required>
                            <option value="">Select integration...</option>
                            <option value="slack">Slack</option>
                            <option value="teams">Microsoft Teams</option>
                            <option value="github">GitHub</option>
                            <option value="jira">Jira</option>
                            <option value="trello">Trello</option>
                            <option value="google">Google Workspace</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="integration_name" class="form-label">Integration Name</label>
                        <input type="text" class="form-control" id="integration_name" name="integration_name" 
                               placeholder="Custom name for this integration">
                    </div>
                    <div class="mb-3">
                        <label for="api_key" class="form-label">API Key / Token</label>
                        <input type="password" class="form-control" id="api_key" name="api_key" 
                               placeholder="Enter your API key or token">
                    </div>
                    <div class="mb-3">
                        <label for="webhook_url" class="form-label">Webhook URL (if applicable)</label>
                        <input type="url" class="form-control" id="webhook_url" name="webhook_url" 
                               placeholder="https://...">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Integration</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
function connectIntegration(provider) {
    // Open OAuth flow or configuration modal
    window.location.href = `/staff-panel/integrations/connect/${provider}/`;
}

function configureIntegration(provider) {
    // Open configuration page
    window.location.href = `/staff-panel/integrations/configure/${provider}/`;
}

function disconnectIntegration(provider) {
    if (confirm(`Are you sure you want to disconnect ${provider}? This will stop all sync operations.`)) {
        const form = document.createElement('form');
        form.method = 'POST';
        form.innerHTML = `
            {% csrf_token %}
            <input type="hidden" name="action" value="disconnect_integration">
            <input type="hidden" name="provider" value="${provider}">
        `;
        document.body.appendChild(form);
        form.submit();
    }
}

function testIntegration(integrationId) {
    fetch(`/staff-panel/integrations/test/${integrationId}/`, {
        method: 'POST',
        headers: {
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
            'Content-Type': 'application/json'
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('Integration test successful!');
        } else {
            alert('Integration test failed: ' + data.error);
        }
    })
    .catch(error => {
        alert('Test failed: ' + error.message);
    });
}

function syncIntegration(integrationId) {
    if (confirm('Start manual sync for this integration?')) {
        fetch(`/staff-panel/integrations/sync/${integrationId}/`, {
            method: 'POST',
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('Sync started successfully!');
                location.reload();
            } else {
                alert('Sync failed: ' + data.error);
            }
        });
    }
}

function syncAllIntegrations() {
    if (confirm('Start sync for all active integrations?')) {
        fetch('/staff-panel/integrations/sync-all/', {
            method: 'POST',
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(data => {
            alert(data.message);
            location.reload();
        });
    }
}

function removeIntegration(integrationId, providerName) {
    if (confirm(`Are you sure you want to remove the ${providerName} integration? This action cannot be undone.`)) {
        const form = document.createElement('form');
        form.method = 'POST';
        form.innerHTML = `
            {% csrf_token %}
            <input type="hidden" name="action" value="remove_integration">
            <input type="hidden" name="integration_id" value="${integrationId}">
        `;
        document.body.appendChild(form);
        form.submit();
    }
}
</script>
{% endblock %}
                        <div class="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-check-circle text-white"></i>
                        </div>
                    </div>
                    <div class="ml-5 w-0 flex-1">
                        <dl>
                            <dt class="text-sm font-medium text-gray-500 truncate">Connected</dt>
                            <dd class="text-lg font-medium text-gray-900">{{ connected_integrations|default:0 }}</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>

        <div class="stat-card bg-white overflow-hidden shadow rounded-lg">
            <div class="p-5">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-yellow-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-exclamation-triangle text-white"></i>
                        </div>
                    </div>
                    <div class="ml-5 w-0 flex-1">
                        <dl>
                            <dt class="text-sm font-medium text-gray-500 truncate">Pending</dt>
                            <dd class="text-lg font-medium text-gray-900">{{ pending_integrations|default:0 }}</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>

        <div class="stat-card bg-white overflow-hidden shadow rounded-lg">
            <div class="p-5">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-times-circle text-white"></i>
                        </div>
                    </div>
                    <div class="ml-5 w-0 flex-1">
                        <dl>
                            <dt class="text-sm font-medium text-gray-500 truncate">Failed</dt>
                            <dd class="text-lg font-medium text-gray-900">{{ failed_integrations|default:0 }}</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Available Integrations -->
    <div class="bg-white shadow rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Available Integrations</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Slack Integration -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center">
                            <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
                                <i class="fab fa-slack text-purple-600 text-xl"></i>
                            </div>
                            <h4 class="text-lg font-semibold text-gray-900">Slack</h4>
                        </div>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                            Connected
                        </span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">Send notifications and updates to Slack channels</p>
                    <button class="w-full bg-gray-50 text-gray-700 px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-100 transition-colors duration-200">
                        Configure
                    </button>
                </div>

                <!-- Microsoft Teams Integration -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center">
                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                                <i class="fab fa-microsoft text-blue-600 text-xl"></i>
                            </div>
                            <h4 class="text-lg font-semibold text-gray-900">Microsoft Teams</h4>
                        </div>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                            Available
                        </span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">Integrate with Microsoft Teams for communication</p>
                    <button class="w-full bg-indigo-50 text-indigo-700 px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-100 transition-colors duration-200">
                        Connect
                    </button>
                </div>

                <!-- Google Workspace Integration -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center">
                            <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center mr-3">
                                <i class="fab fa-google text-red-600 text-xl"></i>
                            </div>
                            <h4 class="text-lg font-semibold text-gray-900">Google Workspace</h4>
                        </div>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                            Pending
                        </span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">Sync with Google Calendar and Gmail</p>
                    <button class="w-full bg-yellow-50 text-yellow-700 px-3 py-2 rounded-md text-sm font-medium hover:bg-yellow-100 transition-colors duration-200">
                        Retry Connection
                    </button>
                </div>

                <!-- Zapier Integration -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center">
                            <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3">
                                <i class="fas fa-bolt text-orange-600 text-xl"></i>
                            </div>
                            <h4 class="text-lg font-semibold text-gray-900">Zapier</h4>
                        </div>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                            Available
                        </span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">Automate workflows with 3000+ apps</p>
                    <button class="w-full bg-indigo-50 text-indigo-700 px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-100 transition-colors duration-200">
                        Connect
                    </button>
                </div>

                <!-- Trello Integration -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center">
                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                                <i class="fab fa-trello text-blue-600 text-xl"></i>
                            </div>
                            <h4 class="text-lg font-semibold text-gray-900">Trello</h4>
                        </div>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                            Available
                        </span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">Sync boards and cards with workflows</p>
                    <button class="w-full bg-indigo-50 text-indigo-700 px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-100 transition-colors duration-200">
                        Connect
                    </button>
                </div>

                <!-- GitHub Integration -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center">
                            <div class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3">
                                <i class="fab fa-github text-gray-900 text-xl"></i>
                            </div>
                            <h4 class="text-lg font-semibold text-gray-900">GitHub</h4>
                        </div>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                            Available
                        </span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">Trigger workflows from code commits</p>
                    <button class="w-full bg-indigo-50 text-indigo-700 px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-100 transition-colors duration-200">
                        Connect
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Webhook Configuration -->
    <div class="bg-white shadow rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg leading-6 font-medium text-gray-900">Webhook Configuration</h3>
                <button type="button" class="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200">
                    <i class="fas fa-plus mr-2"></i>
                    Add Webhook
                </button>
            </div>
            
            <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center mb-2">
                    <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                    <h4 class="font-medium text-gray-900">Webhook Endpoints</h4>
                </div>
                <p class="text-sm text-gray-600 mb-3">Configure webhook endpoints to receive real-time updates from external services.</p>
                
                <div class="space-y-2">
                    <div class="flex items-center justify-between p-3 bg-white rounded border">
                        <div>
                            <code class="text-sm font-mono text-gray-900">https://yourdomain.com/api/webhook/</code>
                            <p class="text-xs text-gray-500">General webhook endpoint</p>
                        </div>
                        <button class="text-indigo-600 hover:text-indigo-900 text-sm font-medium">
                            Copy
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
